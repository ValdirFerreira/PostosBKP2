

<list-postos [IdProprietario]="IdProprietario"
  [NomeProprietario]="NomeProprietario" *ngIf="activeListPostos"
  (close)="closeListPost($event)"
  (IdEdit)="editarPosto($event)"></list-postos>

<div class="page-container" *ngIf="!cadFuncionarioActive && !activeListPostos">

  <div class="header-title">
    <div>
      <h1>Associação do Posto</h1>
      <p class="subtitle">Cadastre os dados do Proprietário, Gerente ou do
        Entrevistador</p>
    </div>

    <div class="actions">

    </div>
  </div>

  <div class="page-wrapper">
    <!-- SIDEBAR -->
    <aside class="sidebar">
      <h2 class="sidebar-title">Configurações</h2>
      <nav class="menu">
        <div class="menu-item" [class.active]="activePosto === 'postos'"
          (click)="activePosto = 'postos'">
          Dados do Posto
        </div>
        <div *ngIf="postoModel.IdItem > 0" class="menu-item"
          [class.active]="activePosto === 'servicos'"
          (click)="activePosto = 'servicos'">
          Serviços Disponíveis
        </div>
        <div *ngIf="postoModel.IdItem > 0" class="menu-item"
          [class.active]="activePosto  === 'funcionarios'"
          (click)="activePosto = 'funcionarios'">
          Funcionários
        </div>
      </nav>

    </aside>

    <!-- CONTEÚDO -->

    <div class="content" id="content" style="display: none;">

      <div *ngIf="activePosto === 'postos'">
        <h1 class="title">Dados do Posto</h1>

        <p class="description">
          Esta seção reúne os dados essenciais para início do preenchimento.
          Mantenha as informações claras e atualizadas para
          garantir a continuidade do processo.
        </p>

        <!-- FORMULÁRIO -->
        <form class="form">

          <div class="print-group">
            <div class=".qrcode-img" [innerHTML]="qrHtml"></div>
            <div>

            </div>

          </div>

          <div class="form-group" *ngIf="IdAssociado >=0">
            <label>Postos {{postoModel.DescItem}}</label>

          </div>

          <div class="form-group">
            <label>Razão Social {{modelPosto.RazaoSocial}}</label>

          </div>

        </form>

      </div>

    </div>

    <div class="content">

      <div *ngIf="activePosto === 'postos'">
        <h1 class="title">Dados do Posto</h1>

        <p class="description">
          Esta seção reúne os dados essenciais para início do preenchimento.
          Mantenha as informações claras e atualizadas para
          garantir a continuidade do processo.
        </p>

        <!-- FORMULÁRIO -->
        <form class="form">

          <div class="print-group">
            <div class=".qrcode-img" [innerHTML]="qrHtml"></div>
            <div>
              <button (click)="imprimir()" class="btn-cancel">Fazer
                impressão</button>
            </div>

          </div>

          <div class="form-group" *ngIf="IdAssociado <=0">
            <label>Postos</label>
            <ng-select placeholder="Postos" id="tipoAtivoModel"
              class="selectFiltroGlobal" bindLabel="DescItem"
              [items]="listaPostos" [searchable]="true" [clearable]="false"
              [(ngModel)]="postoModel" [multiple]="false"
              (change)="SelectPosto()"></ng-select>
          </div>

          <div class="form-group" *ngIf="IdAssociado >=0">
            <label>Postos</label>
            <input type="text" [value]="postoModel.DescItem"
              disabled>
          </div>

          <div class="form-group">
            <label>Bandeira</label>
            <input type="text" [value]="modelPosto.Bandeira"
              disabled>
          </div>

          <div class="form-group">
            <label>Razão Social</label>
            <input type="text" [value]="modelPosto.RazaoSocial"
              disabled>
          </div>

          <div class="form-group">
            <label>Nome Fantasia</label>
            <input type="text" [value]="modelPosto.RazaoSocial"
              disabled>
          </div>

          <div class="form-group">
            <label>Endereço</label>
            <input type="text" [value]="modelPosto.Endereco"
              disabled>
          </div>

          <div class="form-group">
            <label>Complemento</label>
            <input type="text" [value]="modelPosto.Complemento"
              disabled>
          </div>

          <div class="form-group">
            <label>CEP</label>
            <input type="text" [value]="modelPosto.CEP" disabled>
          </div>

          <div class="form-group">
            <label>Bairro</label>
            <input type="text" [value]="modelPosto.Bairro"
              disabled>
          </div>

          <div class="form-group">
            <label>Cidade</label>
            <input type="text" [value]="modelPosto.Cidade"
              disabled>
          </div>

          <div class="form-group">
            <label>Estado</label>
            <input type="text" [value]="modelPosto.Estado"
              disabled>
          </div>

        </form>

        <!-- AÇÕES -->
        <div class="actions">
          <button class="btn-cancel" (click)="cancelar()">Cancelar
            cadastro</button>
          <button class="btn-submit" (click)="associaPosto()">Criar
            Cadastro</button>
        </div>
      </div>

      <div *ngIf="activePosto === 'servicos'">

        <h1 class="title">Serviços disponíveis</h1>
        <p class="description">
          Habilite os serviços disponíveis no seu posto.
        </p>

        <!-- <div class="servico-bloco"
          *ngFor="let categoria of servicosDisponiveis">

          <div class="servico-options">
            <div>
              <h2 class="servico-titulo">{{ categoria.titulo }}</h2>
              <p class="servico-descricao">{{ categoria.descricao }}</p>
            </div>

            <div class="servico-opcoes">
              <div class="servico-item" *ngFor="let opcao of categoria.opcoes">
                <label class="switch">
                  <input type="checkbox" [(ngModel)]="opcao.ativo">
                  <span class="slider"></span>
                </label>

                <span class="servico-nome">{{ opcao.nome }}</span>
              </div>
            </div>
          </div>

          <hr />

        </div> -->

        <div class="servico-bloco"
          *ngFor="let categoria of servicosDisponiveis">

          <div class="servico-options">
            <div>
              <h2 class="servico-titulo">{{ categoria.Titulo }}</h2>
              <p class="servico-descricao">{{ categoria.Descricao }}</p>
            </div>

            <div class="servico-opcoes">

              <div class="servico-item"
                *ngFor="let opcao of categoria.ListOpcoes">

                <label class="switch">
                  <!-- <input type="checkbox"
                    [(ngModel)]="opcao.Resposta"
                    (change)="onOpcaoChange(opcao)"> -->

                  <input type="checkbox"
                    [checked]="opcao.Resposta === '1'"
                    (change)="onOpcaoChange(opcao, $event)">

                  <span class="slider"></span>
                </label>

                <span class="servico-nome">{{ opcao.DescricaoOpcao }}</span>
              </div>

            </div>
          </div>

          <hr />

        </div>

        <!-- AÇÕES -->
        <div class="actions">
          <button class="btn-cancel" (click)="cancelar()">Cancelar
            cadastro</button>
          <button  (click)="nextFuncionarios()" class="btn-submit-seg">Avançar</button>
        </div>

      </div>

      <div *ngIf="activePosto === 'funcionarios'">

        <h1 class="title">Associar funcionário</h1>
        <p class="description">
          Nesta seção, você pode associar funcionários existentes ao posto de
          gasolina.
        </p>

        <br>
        <div
          style="display: flex; justify-content: space-between; align-items: center;">
          <div>
            <h2 class="title">Adicione funcionários</h2>
            <p class="description">
              Adicione na lista abaixo os funcionários que trabalham neste posto
            </p>
          </div>

          <div
            style="display: flex; justify-content: end; align-items: center;">
            <!-- <button class="btn-select">Todos <span class="arrow">▾</span></button> -->
            <button (click)="changeCadFuncionario(true)"
              class="btn-new">Adicionar
              funcionário</button>
          </div>

        </div>

        <!-- TABELA -->
        <div class="table-card">
          <table class="table">
            <thead>
              <tr>

                <th>Nome / Email</th>
                <th>Função</th>
                <th>Ações</th>
              </tr>
            </thead>

            <tbody>
              <tr *ngFor="let p of pagedList">

                <td class="col-name">{{ p.Nome }}</td>

                <td>
                  <span class="tag">{{ p.Funcao }}</span>
                </td>

                <td class="col-actions">
                  <!-- <button class="icon-btn">
                    <div class="btn-shop"
                      (click)="changeAssPosto(true,p.Cod)"></div>
                  </button>
                  <button class="icon-btn">
                    <div class="btn-edit"
                      (click)="ProprietarioConsultarPeloID(p.Cod)"></div>
                  </button>-->
                  <button class="icon-btn">
                    <div class="btn-lixeira"
                      (click)="changeDelete(p.Email)"></div>
                  </button>
                </td>

              </tr>

              <tr *ngIf="pagedList.length === 0">
                <td colspan="4" class="empty">Nenhum registro encontrado.</td>
              </tr>
            </tbody>
          </table>
        </div>

        <!-- PAGINAÇÃO -->
        <div class="pagination">
          <button class="nav-btn" (click)="prevPage()"
            [disabled]="currentPage === 1">‹ Retornar</button>

          <div class="pages">
            <button *ngFor="let pg of pages" (click)="goToPage(pg)"
              [class.active]="pg === currentPage">
              {{ pg }}
            </button>
          </div>

          <button class="nav-btn" (click)="nextPage()"
            [disabled]="currentPage === totalPages">Avançar ›</button>
        </div>

        <!-- AÇÕES -->
        <div class="actions">
          <button class="btn-cancel" (click)="cancelar()">Cancelar
            cadastro</button>
          <button class="btn-submit" (click)="salvarPosto()">Criar
            Cadastro</button>
        </div>

      </div>

    </div>

  </div>

</div>

<div class="page-container" *ngIf="cadFuncionarioActive && !activeListPostos">

  <div class="header-title">
    <div>
      <h1>Cadastro do Funcionário</h1>
      <p class="subtitle">Cadastre os dados do Proprietário, Gerente ou do
        Entrevistador</p>
    </div>

    <div class="actions">

    </div>
  </div>

  <div class="page-wrapper">
    <!-- SIDEBAR -->
    <aside class="sidebar">
      <h2 class="sidebar-title">Configurações</h2>
      <nav class="menu">
        <div class="menu-item" [class.active]="activeCadFuncionario === 'dados'"
          (click)="activeCadFuncionario = 'dados'">
          Dados do Funcionário
        </div>
        <div class="menu-item"
          [class.active]="activeCadFuncionario === 'contato'"
          (click)="activeCadFuncionario = 'contato'">
          Contato
        </div>

      </nav>

    </aside>

    <!-- CONTEÚDO -->

    <div class="content">

      <div *ngIf="activeCadFuncionario === 'dados'">
        <h1 class="title">Dados do Funcionário</h1>

        <p class="description">
          Esta seção reúne os dados essenciais para início do preenchimento.
          Mantenha as informações claras e atualizadas para garantir a
          continuidade do processo.
        </p>

        <!-- FORMULÁRIO -->
        <form class="form">

          <div class="form-group">
            <label>Nome do Funcionário *</label>
            <input type="text" [(ngModel)]="model.Nome"
              name="razaosocial">
          </div>

          <div class="form-group">
            <label>Função</label>
            <input type="text" [(ngModel)]="model.Funcao"
              name="nomefantasia">
          </div>

          <!-- Status -->
          <div class="form-group">
            <label>Status</label>

            <select [(ngModel)]="model.CodStatus" name="status">
              <option value="1">Ativo</option>
              <option value="2">Inativo</option>
            </select>
          </div>

        </form>

        <!-- AÇÕES -->
        <div class="actions">
          <button class="btn-cancel"
            (click)="cancelarDadastroFuncionario()">Cancelar
            cadastro</button>
          <button disabled class="btn-submit">Criar
            Cadastro</button>
        </div>
      </div>

      <div *ngIf="activeCadFuncionario === 'contato'">
        <h1 class="title">Dados de Contato</h1>

        <p class="description">
          Esta seção reúne os dados essenciais para início do preenchimento.
          Mantenha as informações claras e
          atualizadas para
          garantir a continuidade do processo.
        </p>

        <!-- FORMULÁRIO -->
        <form class="form">
          <!-- EMAIL -->
          <div class="form-group">
            <label>Email <span class="required">*</span></label>
            <input type="email" placeholder="email@example.com"
              [(ngModel)]="model.Email" name="email">
          </div>

        </form>

        <!-- AÇÕES -->
        <div class="actions">
          <button class="btn-cancel"
            (click)="cancelarDadastroFuncionario()">Cancelar
            cadastro</button>
          <button class="btn-submit" (click)="salvarFuncionario()">Criar
            Cadastro</button>
        </div>
      </div>

    </div>

  </div>

</div>